{"version":3,"sources":["assets\\Script\\MainScene\\RobotInforCtrl.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import Global from \"../App/Global\";\r\nimport { LocMsg } from \"../BaseModel/MsgEvent\";\r\nimport { IRobot, RobotTypeDesc } from \"../Model/RobotProp\";\r\nimport { API_BuyRobot, API_UseRobot } from \"../Utils/LocalDataAPI\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\nexport enum INFOR_STATE {\r\n    BUY,\r\n    HAED,\r\n    ISUSEING,\r\n}\r\n\r\n@ccclass\r\nexport default class RobotInforCtrl extends cc.Component {\r\n\r\n    @property(cc.Sprite)\r\n    icon: cc.Sprite = null;\r\n\r\n    @property(cc.Label)\r\n    lbID: cc.Label = null;\r\n\r\n    @property(cc.Label)\r\n    lbType: cc.Label = null;\r\n\r\n    @property(cc.Label)\r\n    lbMint: cc.Label = null;\r\n\r\n    @property(cc.Label)\r\n    lbLv: cc.Label = null;\r\n\r\n    @property(cc.Label)\r\n    lbEfficiency: cc.Label = null;\r\n\r\n    @property(cc.Label)\r\n    lbLuck: cc.Label = null;\r\n\r\n    @property(cc.Label)\r\n    lbLoss: cc.Label = null;\r\n\r\n    @property(cc.Label)\r\n    lbInt: cc.Label = null;\r\n\r\n    @property(cc.Label)\r\n    lbSol: cc.Label = null;\r\n\r\n    @property([cc.SpriteFrame])\r\n    iconSFs: cc.SpriteFrame[] = [];\r\n\r\n    @property(cc.Node)\r\n    ndHad: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    ndBuy: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    btnUse: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    btnUnUse: cc.Node = null;\r\n\r\n\r\n    @property([cc.ProgressBar])\r\n    pgbs: cc.ProgressBar[] = [];\r\n\r\n    @property([cc.Node])\r\n    ndInts: cc.Node = null;\r\n\r\n    private robot: IRobot = null;\r\n\r\n    protected onLoad(): void {\r\n        Global.Inst.On(LocMsg.UPDATE_ROBOT_INFOR, this.setDataToUI, this)\r\n    }\r\n    protected onEnable(): void {\r\n        // // 测试；\r\n        // let data: IRobot = {\r\n        //     id: 1,\r\n        //     robotImgId: 2,\r\n        //     robotType: RobotType.TYPE_1,\r\n        //     level: 3,\r\n        //     mint: 4,\r\n        //     sol: 5,\r\n        //     efficiency: 6,\r\n        //     luck: 7,\r\n        //     loss: 8\r\n        // };\r\n        // this.setDialog(data, INFOR_STATE.ISUSEING);\r\n    }\r\n\r\n    setDialog(data: IRobot, state: INFOR_STATE) {\r\n        this.setDataToUI(data, state);\r\n        this.node.active = true;\r\n    }\r\n\r\n    setDataToUI(data: IRobot, state: INFOR_STATE) {\r\n        this.robot = data; this.lbID.string = \"\" + data.id;\r\n        this.lbType.string = RobotTypeDesc[data.robotType];\r\n        this.lbMint.string = data.mint + \"/7\";\r\n        this.lbLv.string = \"Lv.\" + data.level;\r\n        this.lbEfficiency.string = \"\" + data.efficiency;\r\n        this.lbLuck.string = \"\" + data.luck;\r\n        this.lbLoss.string = \"\" + data.pow;\r\n        this.lbInt.string = data.intMin + \"~\" + data.intMax;\r\n        this.lbSol.string = data.maticCost + \"\";\r\n        this.icon.spriteFrame = this.iconSFs[data.robotImgId];\r\n\r\n\r\n        this.pgbs[0].progress = data.efficiency / 10;\r\n        this.pgbs[1].progress = data.luck / 10;\r\n        this.pgbs[2].progress = data.pow / 10;\r\n        for (let index = 0; index < 10; index++) {\r\n            this.ndInts.children[index].active = (index >= data.intMin - 1 && index < data.intMax);\r\n\r\n        }\r\n        switch (state) {\r\n            case INFOR_STATE.BUY:\r\n                this.ndHad.active = false;\r\n                this.ndBuy.active = true;\r\n                break;\r\n            case INFOR_STATE.HAED:\r\n                this.ndHad.active = true;\r\n                this.ndBuy.active = false;\r\n                this.btnUse.active = true;\r\n                this.btnUnUse.active = false;\r\n                break;\r\n\r\n            case INFOR_STATE.ISUSEING:\r\n                this.ndHad.active = true;\r\n                this.ndBuy.active = false;\r\n                this.btnUse.active = false;\r\n                this.btnUnUse.active = true;\r\n                break;\r\n        }\r\n\r\n    }\r\n\r\n    OnBtnClose() {\r\n        this.node.active = false;\r\n    }\r\n\r\n    OnClickBuy() {\r\n        API_BuyRobot(this.robot);\r\n    }\r\n\r\n\r\n    OnClickUse() {\r\n        API_UseRobot(this.robot);\r\n    }\r\n\r\n    // update (dt) {}\r\n}\r\n"]}